from Standard.Base import all
from Standard.Table import all
from Standard.Database import all
from Standard.AWS import all
from Standard.Google_Api import all
from Standard.Snowflake import all
import Standard.Examples
import Standard.Visualization

## ICON group
take_step vector3 vector1 =
    node15 = vector3.at 0
    node16 = vector3.at 1
    node17 = vector1.at node16
    node14 = (a-> b-> [a.at 0 + b.at 0, a.at 1 + b.at 1]) node15 node17
    node14

## ICON group
grid_dimensions node7 =
    integer2 = node7.length
    node15 = node7.at 0 . length
    vector4 = [node15, integer2]
    vector4

## ICON group
inside_rev node14 vector4 =
    node15 = node14.at 0
    node16 = node15 >= 0
    node18 = vector4.at 0
    node17 = node15 < node18
    node19 = node16 && node17
    node20 = node14.at 1
    node21 = node20 >= 0
    node22 = vector4.at 1
    node23 = node20 < node22
    node24 = node21 && node23
    node25 = node19 && node24
    node25

if_then_else b ~t ~f = if b then t else f

main =
    node1 = Data.read '/Users/gmt/Desktop/input.txt'
    vector1 = [[0, 1], [1, 0], [0, -1], [-1, 0]]
    node3 = Data.read '/Users/gmt/Desktop/input2.txt'
    node2 = node3
    node5 = node2.split '\n'
    node6 = node5.take (node5.length - 1)
    node7 = node6.map .characters
    node8 = x-> y-> node7.at y . at x
    node9 = node6.at 0
    node10 = node7.at 0
    node4 = Meta.get_simple_type_name node10
    node11 = node7.index_of (x-> x.contains "^")
    node12 = node7.at node11 . index_of (x-> x == "^")
    vector2 = [node12, node11]
    text1 = "start position"
    node13 = "map grid (vector of vectors)"
    text2 = "direction vectors"
    integer1 = 0
    text3 = "start direction"
    text4 = "read grid"
    vector3 = [vector2, integer1, []]
    text5 = "start state (position, dir, history)"
    node14 = Main.take_step vector3 vector1
    vector4 = Main.grid_dimensions node7
    node25 = Main.inside_rev node14 vector4
    node15 = vector3.at 2
    node16 = if_then_else node25 node15 _
    node18 = p-> node8 (p.at 0) (p. at 1)



#### METADATA ####
[[{"index":{"value":275},"size":{"value":7}},"68ee5098-db9c-41cf-9558-639e0c330685"],[{"index":{"value":283},"size":{"value":7}},"776b40aa-15fd-48ea-897e-42ed862ef9d3"],[{"index":{"value":306},"size":{"value":12}},"16482e24-52ff-43aa-9529-3cd670ece9da"],[{"index":{"value":332},"size":{"value":12}},"08e592bf-d48c-4d8b-9a34-e8b8e920a55b"],[{"index":{"value":358},"size":{"value":17}},"48c0e827-22f8-4edd-835d-a2ff5bdf903d"],[{"index":{"value":389},"size":{"value":58}},"ebe74efa-c0ce-4fbe-bbd1-3d8094c39af3"],[{"index":{"value":452},"size":{"value":6}},"86397ca7-4682-40f0-a409-8e562a0bcdc1"],[{"index":{"value":490},"size":{"value":5}},"4b4e83fc-bf95-4532-9e87-f3979b214423"],[{"index":{"value":513},"size":{"value":12}},"af7586b6-9d32-4489-b339-e47c67093f06"],[{"index":{"value":539},"size":{"value":19}},"8687efa6-3501-4fb8-a7b5-ead73f6ea85b"],[{"index":{"value":573},"size":{"value":18}},"20d92ede-54ed-42c4-9e78-b6aa1e588ab0"],[{"index":{"value":596},"size":{"value":7}},"71bf3316-e501-44cc-b4da-37ba8da4b9b2"],[{"index":{"value":630},"size":{"value":6}},"9e1d4c77-dada-4acd-a6f9-c4398a0dec71"],[{"index":{"value":637},"size":{"value":7}},"f2711c52-3f95-4f1f-8f60-e40f360d139c"],[{"index":{"value":660},"size":{"value":11}},"d777f90d-9e1e-4426-bd20-ba9c910906fc"],[{"index":{"value":685},"size":{"value":11}},"4a2a5f24-6648-4c62-8327-47ff7eb240bc"],[{"index":{"value":710},"size":{"value":12}},"8dede4ff-9b46-4860-bc92-ce50bbc51496"],[{"index":{"value":736},"size":{"value":15}},"043df864-9b99-415f-9630-f37557bf2417"],[{"index":{"value":765},"size":{"value":16}},"43d8d0c5-5ed3-4009-b3f0-586691e2fd51"],[{"index":{"value":795},"size":{"value":11}},"5929a743-3767-4f4d-b391-a2c52679160e"],[{"index":{"value":820},"size":{"value":11}},"f014e2d9-9575-480b-a1ee-cdd1d845ff4f"],[{"index":{"value":845},"size":{"value":12}},"44ccc217-8102-491b-82c5-27c97dc7e395"],[{"index":{"value":871},"size":{"value":15}},"5ae1266b-2cb3-4cf6-9e4a-02c5eff2db0c"],[{"index":{"value":900},"size":{"value":16}},"12f37ad4-a931-4d1b-9b83-2bf8e8e37581"],[{"index":{"value":930},"size":{"value":16}},"b5f672b6-16bf-4fd3-8b1d-9065a2ffa3ca"],[{"index":{"value":951},"size":{"value":6}},"7f130911-5334-4406-8acb-5efe61288bf5"],[{"index":{"value":1021},"size":{"value":40}},"9f69ef41-a86c-4aaf-960a-bb5508b64473"],[{"index":{"value":1076},"size":{"value":34}},"1343a198-6ec9-4747-8824-5981878af864"],[{"index":{"value":1123},"size":{"value":41}},"e55e58d2-1c25-40e4-a57b-d243c88a16d2"],[{"index":{"value":1177},"size":{"value":5}},"21e54c55-2ac4-4b85-986d-fe38eaed54e0"],[{"index":{"value":1195},"size":{"value":16}},"163c9bd4-7e8c-4d80-a296-e8ed7320eb39"],[{"index":{"value":1224},"size":{"value":29}},"d5111244-9c64-45a5-ba87-a15a5da3d16a"],[{"index":{"value":1266},"size":{"value":21}},"71700a75-d17a-46a0-9d40-b1d437100d54"],[{"index":{"value":1300},"size":{"value":25}},"6a486e13-1379-49af-bb80-086d407aa902"],[{"index":{"value":1338},"size":{"value":10}},"73f3fcb7-ab07-46d1-96f0-992fff1f541b"],[{"index":{"value":1362},"size":{"value":10}},"faac0696-af57-40a3-9ca6-7716d46c76fe"],[{"index":{"value":1385},"size":{"value":32}},"fb7a0d32-6ad0-4574-b1e3-fb9dd4ab8735"],[{"index":{"value":1431},"size":{"value":35}},"5566212d-9928-4031-8316-fa93e6b1d660"],[{"index":{"value":1480},"size":{"value":41}},"784d1b20-f2b5-42f8-8823-99bd7799e0ba"],[{"index":{"value":1536},"size":{"value":16}},"478b1ddd-928f-46a1-be52-03358ef92f66"],[{"index":{"value":1565},"size":{"value":16}},"450ea454-ed28-477f-9f84-d33aa0652567"],[{"index":{"value":1595},"size":{"value":30}},"dbab122a-09a0-4f76-9b13-fe2fbcf63aba"],[{"index":{"value":1638},"size":{"value":19}},"7bb701e6-aba4-4fe3-8696-d20a820874d3"],[{"index":{"value":1673},"size":{"value":1}},"993595fb-6c2d-4497-9785-94ac76501a4e"],[{"index":{"value":1687},"size":{"value":17}},"d66a964c-cbc0-4560-b9ba-1869316abe54"],[{"index":{"value":1717},"size":{"value":11}},"09acb09b-c034-4440-b9e1-1b02ee36b2cd"],[{"index":{"value":1743},"size":{"value":23}},"3126e1c2-1b29-4572-ac96-22b03b0304c0"],[{"index":{"value":1779},"size":{"value":38}},"f9953aeb-a256-4351-9454-c98458597382"],[{"index":{"value":1831},"size":{"value":30}},"7a29ad31-67a9-4047-a829-8522d99229e5"],[{"index":{"value":1876},"size":{"value":26}},"76cf7c25-4bbe-4903-bf91-a1dd9850cdba"],[{"index":{"value":1916},"size":{"value":30}},"cd08ac02-e73d-4902-8296-d41cc90b5e3b"],[{"index":{"value":1960},"size":{"value":12}},"b1516f65-15ff-4446-9003-c0a8d3009f34"],[{"index":{"value":1986},"size":{"value":28}},"3913a16b-2da5-4435-95fa-ae635c2895cc"],[{"index":{"value":2028},"size":{"value":28}},"7844b6ab-3f92-4238-bd3c-8bfd938307cc"]]
{"ide":{"node":{"68ee5098-db9c-41cf-9558-639e0c330685":{"position":{"vector":[-1063,397]}},"776b40aa-15fd-48ea-897e-42ed862ef9d3":{"position":{"vector":[-935,397]}},"16482e24-52ff-43aa-9529-3cd670ece9da":{"position":{"vector":[-1063,319]}},"08e592bf-d48c-4d8b-9a34-e8b8e920a55b":{"position":{"vector":[-814,325]}},"48c0e827-22f8-4edd-835d-a2ff5bdf903d":{"position":{"vector":[-843,249]}},"ebe74efa-c0ce-4fbe-bbd1-3d8094c39af3":{"position":{"vector":[-1063,177]},"visualization":{"show":true}},"86397ca7-4682-40f0-a409-8e562a0bcdc1":{"position":{"vector":[-1063,-45]}},"4b4e83fc-bf95-4532-9e87-f3979b214423":{"position":{"vector":[-803,841]}},"af7586b6-9d32-4489-b339-e47c67093f06":{"position":{"vector":[-534,769]}},"8687efa6-3501-4fb8-a7b5-ead73f6ea85b":{"position":{"vector":[-801,769]}},"20d92ede-54ed-42c4-9e78-b6aa1e588ab0":{"position":{"vector":[-803,657]}},"71bf3316-e501-44cc-b4da-37ba8da4b9b2":{"position":{"vector":[-803,585]}},"9e1d4c77-dada-4acd-a6f9-c4398a0dec71":{"position":{"vector":[-1321,231]}},"f2711c52-3f95-4f1f-8f60-e40f360d139c":{"position":{"vector":[-1194,231]}},"d777f90d-9e1e-4426-bd20-ba9c910906fc":{"position":{"vector":[-1288,159]}},"4a2a5f24-6648-4c62-8327-47ff7eb240bc":{"position":{"vector":[-1321,87]}},"8dede4ff-9b46-4860-bc92-ce50bbc51496":{"position":{"vector":[-966,146]}},"043df864-9b99-415f-9630-f37557bf2417":{"position":{"vector":[-1067,74]}},"43d8d0c5-5ed3-4009-b3f0-586691e2fd51":{"position":{"vector":[-1158,-1]}},"5929a743-3767-4f4d-b391-a2c52679160e":{"position":{"vector":[-733,118]}},"f014e2d9-9575-480b-a1ee-cdd1d845ff4f":{"position":{"vector":[-765,46]}},"44ccc217-8102-491b-82c5-27c97dc7e395":{"position":{"vector":[-393,105]}},"5ae1266b-2cb3-4cf6-9e4a-02c5eff2db0c":{"position":{"vector":[-425,33]}},"12f37ad4-a931-4d1b-9b83-2bf8e8e37581":{"position":{"vector":[-601,-43]}},"b5f672b6-16bf-4fd3-8b1d-9065a2ffa3ca":{"position":{"vector":[-862,-120]},"visualization":{"show":true}},"7f130911-5334-4406-8acb-5efe61288bf5":{"position":{"vector":[-862,-342]}},"9f69ef41-a86c-4aaf-960a-bb5508b64473":{"position":{"vector":[-1297,1070]},"visualization":{"show":false,"width":562.5859375,"height":297.296875}},"1343a198-6ec9-4747-8824-5981878af864":{"position":{"vector":[-621,905]}},"e55e58d2-1c25-40e4-a57b-d243c88a16d2":{"position":{"vector":[-1297,998]}},"21e54c55-2ac4-4b85-986d-fe38eaed54e0":{"position":{"vector":[-1297,926]}},"163c9bd4-7e8c-4d80-a296-e8ed7320eb39":{"position":{"vector":[-1166,905]}},"d5111244-9c64-45a5-ba87-a15a5da3d16a":{"position":{"vector":[-1166,841]}},"71700a75-d17a-46a0-9d40-b1d437100d54":{"position":{"vector":[-1158,769]},"visualization":{"show":false,"width":485.34765625,"height":234.125}},"6a486e13-1379-49af-bb80-086d407aa902":{"position":{"vector":[-1106,589]}},"73f3fcb7-ab07-46d1-96f0-992fff1f541b":{"position":{"vector":[-32,585]}},"faac0696-af57-40a3-9ca6-7716d46c76fe":{"position":{"vector":[-115,517]},"visualization":{"show":true}},"fb7a0d32-6ad0-4574-b1e3-fb9dd4ab8735":{"position":{"vector":[106,339]},"visualization":{"show":true}},"5566212d-9928-4031-8316-fa93e6b1d660":{"position":{"vector":[-1872,464]}},"784d1b20-f2b5-42f8-8823-99bd7799e0ba":{"position":{"vector":[-1802,417]}},"478b1ddd-928f-46a1-be52-03358ef92f66":{"position":{"vector":[-1846,345]},"visualization":{"show":true}},"450ea454-ed28-477f-9f84-d33aa0652567":{"position":{"vector":[-2013,367]}},"dbab122a-09a0-4f76-9b13-fe2fbcf63aba":{"position":{"vector":[-1417,769]}},"7bb701e6-aba4-4fe3-8696-d20a820874d3":{"position":{"vector":[-621,955]}},"993595fb-6c2d-4497-9785-94ac76501a4e":{"position":{"vector":[-852,955]}},"d66a964c-cbc0-4560-b9ba-1869316abe54":{"position":{"vector":[-852,998]}},"09acb09b-c034-4440-b9e1-1b02ee36b2cd":{"position":{"vector":[-1245,589]}},"3126e1c2-1b29-4572-ac96-22b03b0304c0":{"position":{"vector":[-1108,448]}},"f9953aeb-a256-4351-9454-c98458597382":{"position":{"vector":[-1343,489]}},"7a29ad31-67a9-4047-a829-8522d99229e5":{"position":{"vector":[-688,417]}},"76cf7c25-4bbe-4903-bf91-a1dd9850cdba":{"position":{"vector":[-803,732]}},"cd08ac02-e73d-4902-8296-d41cc90b5e3b":{"position":{"vector":[-666,295]}},"b1516f65-15ff-4446-9003-c0a8d3009f34":{"position":{"vector":[-905,195]}},"3913a16b-2da5-4435-95fa-ae635c2895cc":{"position":{"vector":[-1035,40]}},"7844b6ab-3f92-4238-bd3c-8bfd938307cc":{"position":{"vector":[-803,589]}}},"widget":{},"snapshot":"eJyNVclu2zAQvesrBgqQ2Kgsm7KzAZGBdEHRQ9tDuhxcV6AtyiYikYI4Se0e8u0FJYqUnDjoSQTfmzcrR1klC7hDKlJapeFbqhjwopQVAs1zL+uh3+gqfwV+T5GuXhW4/Xl3HPwo5SZnyW3Jj3PuhPyT5fS+58McLenDjhZlztQz4AdXDzTnfylyKTzv5AQ+vfv6BTaVfCg9pPcsUchKeGRrlNXUfAnEHgCAkCkj5xC3cEgRJg656CPEIZcWIRpp2A6eQQwDOprDajSHBa1l4Q2s6kMA9QVpL8hy2AbSaHd0DhPaVDxNUl4wobgUqmZdmmS4QLZhVQRxcx3mTGxw20+0Qep4QugQmmR03IuGG1i9ZZdwGBAXiqcsqdhjm7lVeu6YzF4osGHM4y5wZet7aHLpTG4M14HXLXgBp6eH1YwmvTBcNyNigGjSDyOK+mF0TKbO5MZwHThrQdKGEU0daqtxbdFZB/U8niW4ZSJhuWKwgieEpwxi4BmsQAOAUEOZ5xWUi26lIQb9YsOK0RTOxt8Vq9R4U+D4PVP3KMsxF+UDhrjDs05XtdliMQmALANYkAAm+jsJYFRfjOqbpfUy/T8vkXNTZ2bSdpVoCxGFqsw5wtkv4ejtaJyH+hHDoDk3EwsjIEPLbCfiIixoCeF6Syu6RlYpy9DTtBvNYT+auwewhxAows6yrq1Of+ImvWdj73WTPzOk4YZhorjeTgnuS5YIWjBj6USIFeEiZbtEZjDQIe3CtRRIuVDg//ZdUiTqejUSIRwYQxw7s6aXkX3CUWDsms4h26GOwldIK4RSKq5Xpu9c6r76uoZ6y8Cg0QOZGWU19K2Q9uKnvGJrrdES/O4e0r4m1mDqPFszJ6dr6dfTpF37nXS03cJkZlcSCWCxdFmdO22FFBkM2uQC7SyALVcoq/2wk2vdPcpFePQXcbAWa/KL67f/smve0a149K/jtke9FHsrwGgbs6S/JUsz01cwKOsBHeqDnmwy9P4Bk/tnjQ==","import":{}}}