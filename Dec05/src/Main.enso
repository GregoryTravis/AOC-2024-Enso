from Standard.Base import all
from Standard.Table import all
from Standard.Database import all
from Standard.AWS import all
from Standard.Google_Api import all
from Standard.Snowflake import all
import Standard.Examples
import Standard.Visualization

## ICON group
successives node9 =
    node10 = (pages-> 0.up_to (pages.length-1) . map (i-> [pages.at i, pages.at i+1])) node9
    node10

until f x =
    x_new = f x
    if x == x_new then x else
        @Tail_Call until f x_new

## ICON group
collapsed node6 node15 =
    node16 = successives node15
    node17 = node16.index_of (pair-> node6.contains pair . not)
    node21 = (lst-> i-> (lst.take i) + [lst.at i+1, lst.at i] + (lst.drop i+2))
    node22 = if node17.is_nothing then node15 else (node21 node15 node17)
    node22

main =
    node1 = Data.read '/Users/gmt/Desktop/small_input.txt'
    node12 = Data.read '/Users/gmt/Desktop/input.txt'
    node2 = node12.split '\n\n'
    integer1 = node2.length
    node3 = node2.at 0
    node4 = node2.at 1
    node5 = node3.split '\n' . map (x-> x.split '|' . map Integer.parse)
    node6 = Hashset.from_vector node5
    vector1 = node6.to_vector
    node7 = node4.split '\n'
    node8 = node7.take (node7.length - 1)
    node9 = node8.map (x-> x.split ',' .  map Integer.parse)
    node10 = Main.successives node9
    node13 = node9.filter (pages-> (successives pages).all (pair-> node6.contains pair))
    node18 = node13.map (x-> (length-> (length % 2) == 1) x.length) . all x->x
    node19 = node13.map (x-> x.at (x.length.div 2))
    node20 = node19.fold 0 (_+_)
    text1 = "verify they're all of odd length"
    any1 = node5.to_table
    any2 = any1.sort [(..Name '0')]
    any3 = any2.aggregate ['0'] [..Count "c"]
    node11 = any1.at "0"
    vector2 = node11.to_vector
    vector3 = vector2.distinct
    integer2 = vector3.length
    any4 = vector3.sort
    integer3 = any4.length
    integer4 = node5.length
    any5 = any3.sort [(..Name 'c' ..Descending), (..Name '0' ..Ascending)]
    node14 = node9.filter (pages-> (successives pages).all (pair-> node6.contains pair) . not)
    node15 = node14.at 0
    node22 = Main.collapsed node6 node15
    node24 = [1, 2, 3].index_of (_==4)
    node25 = rules-> lst-> (successives lst).index_of (pair-> rules.contains pair . not)
    node29 = node6
    node26 = node25 node29
    node27 = until node26 node15
    node28 = node26 node15
    node16 = until (lst-> collapsed node6 lst) node15
    node17 = node14.map (lst-> until (lst-> collapsed node6 lst) lst)
    node21 = node17.map (x-> x.at (x.length.div 2))
    node23 = node21.fold 0 (_+_)



#### METADATA ####
[[{"index":{"value":277},"size":{"value":5}},"92b99b09-1c45-4ae8-8e54-32cef6df217d"],[{"index":{"value":298},"size":{"value":79}},"db5e8a98-076c-43fd-b0d8-4e4a50d12adc"],[{"index":{"value":382},"size":{"value":6}},"f5450f4d-fb07-47f5-8818-b0bc63eb73cc"],[{"index":{"value":534},"size":{"value":18}},"af4748be-d484-4fb4-8170-571486dd3470"],[{"index":{"value":566},"size":{"value":50}},"f6f516bb-65ca-4d3d-8e4d-7cfbb066b517"],[{"index":{"value":630},"size":{"value":66}},"d9bf1eed-28f5-434b-a009-f014fb9cdcc7"],[{"index":{"value":710},"size":{"value":60}},"fbe0593b-40db-4106-a678-14700b6c8609"],[{"index":{"value":749},"size":{"value":20}},"6d027c52-1f07-4dcb-9488-18cc78a72c4e"],[{"index":{"value":775},"size":{"value":6}},"475b9f40-8a0f-4d80-8bc2-b67786a9f8fc"],[{"index":{"value":802},"size":{"value":46}},"49f948dd-c5a1-4fa1-bbd9-46e2013d73e7"],[{"index":{"value":862},"size":{"value":40}},"fb8c5888-1fca-46bd-8af2-e30b8442df79"],[{"index":{"value":915},"size":{"value":19}},"f0805768-e205-4b8f-b692-d89e8f26fd6b"],[{"index":{"value":950},"size":{"value":12}},"332d627f-1694-4227-b055-1c33b3a3831d"],[{"index":{"value":975},"size":{"value":10}},"6add24ea-b777-4dcc-8575-96bd607c0a21"],[{"index":{"value":998},"size":{"value":8}},"472a6683-c120-41c5-a05f-6cc731518b3f"],[{"index":{"value":998},"size":{"value":10}},"18a8de80-4470-4e87-88c9-db7ea967bb9d"],[{"index":{"value":1021},"size":{"value":60}},"748906c1-1a61-4b71-9680-23eba378ddf5"],[{"index":{"value":1094},"size":{"value":25}},"d63db436-245a-418f-957f-99020e9930a2"],[{"index":{"value":1134},"size":{"value":15}},"9c99a707-b8c1-420d-adc5-62467d34cd77"],[{"index":{"value":1162},"size":{"value":16}},"188a8803-6ed0-4c2c-9b25-5e152247736d"],[{"index":{"value":1191},"size":{"value":29}},"457714ff-4f05-4e50-966b-fa1e5cff501c"],[{"index":{"value":1233},"size":{"value":48}},"4f09384f-7608-4742-96dc-beb3994afa1f"],[{"index":{"value":1295},"size":{"value":22}},"f7c9d864-6c73-40b8-bd84-0495d827d830"],[{"index":{"value":1331},"size":{"value":75}},"952bc637-9e79-4cb0-bd68-2956726be4cb"],[{"index":{"value":1420},"size":{"value":54}},"58c47f9e-8603-414d-b63a-44d72fb8c830"],[{"index":{"value":1420},"size":{"value":60}},"92c6d59a-a235-4a2e-b82b-9a2e7746c3b3"],[{"index":{"value":1420},"size":{"value":65}},"2a0af6a8-923b-4ae0-933c-0338860243c7"],[{"index":{"value":1499},"size":{"value":38}},"e372dadd-7638-4c2f-9e8c-643bca3a9d37"],[{"index":{"value":1551},"size":{"value":19}},"fe1e4668-3217-4b89-8a27-28569cdcee5f"],[{"index":{"value":1583},"size":{"value":34}},"abaa894d-693e-4237-98ea-333f39cff76e"],[{"index":{"value":1629},"size":{"value":14}},"05a820e3-7ee9-407a-8063-f1a95f86d33b"],[{"index":{"value":1655},"size":{"value":9}},"3b49191f-1c52-4b37-84e5-01c57c938984"],[{"index":{"value":1655},"size":{"value":24}},"6877cdaf-064c-4da1-9452-c2fb4e130dd0"],[{"index":{"value":1691},"size":{"value":14}},"0005313a-3432-4cea-8241-012aa65a94d1"],[{"index":{"value":1691},"size":{"value":20}},"c58db107-4218-432e-b7a9-feaf34acf2ad"],[{"index":{"value":1691},"size":{"value":34}},"b9a5ed27-494e-434f-b942-a5385a50180e"],[{"index":{"value":1739},"size":{"value":11}},"f2e7d859-f926-4dca-acbe-f9294653a28e"],[{"index":{"value":1765},"size":{"value":16}},"eee045fa-e036-452a-aabc-4f6b42962354"],[{"index":{"value":1796},"size":{"value":16}},"2e49830f-f271-444e-a900-1a6fbb9d8d6e"],[{"index":{"value":1828},"size":{"value":14}},"7c9cb84c-6cdf-4cda-afd8-cb7e1a3660d1"],[{"index":{"value":1854},"size":{"value":12}},"e725559f-5386-4ac5-8192-5c431db41a81"],[{"index":{"value":1882},"size":{"value":11}},"af6ce864-6560-40b0-8cdd-11e8014e4add"],[{"index":{"value":1909},"size":{"value":12}},"084240be-d179-42fc-b26f-55497504d995"],[{"index":{"value":1933},"size":{"value":9}},"a1db685f-7b40-4fc7-ac19-83bcae0f1239"],[{"index":{"value":1933},"size":{"value":63}},"23edecd0-a09e-404f-acf7-e0fdbbfbd232"],[{"index":{"value":2010},"size":{"value":81}},"0224d3fe-f366-4e43-a118-63aaa7cf4b20"],[{"index":{"value":2105},"size":{"value":11}},"cc2131f9-ed7e-40e9-84e7-b3daef160faf"],[{"index":{"value":2130},"size":{"value":27}},"cc74ae62-48ff-43f5-a586-bd50db55c7b6"],[{"index":{"value":2171},"size":{"value":25}},"1e6ce55e-2a03-4f98-b35f-926e11c03828"],[{"index":{"value":2210},"size":{"value":75}},"db4af5ee-3580-4a12-8842-ba14df3b8566"],[{"index":{"value":2299},"size":{"value":5}},"222065a4-d7f8-464c-b321-aa34cd13f70f"],[{"index":{"value":2318},"size":{"value":13}},"403be22f-5b4e-4a27-8964-196a354f01ec"],[{"index":{"value":2345},"size":{"value":19}},"0e08cad7-f3a7-4367-a2d1-bb266370e32d"],[{"index":{"value":2378},"size":{"value":13}},"873dd01b-6471-4332-a906-3dbcae5d5185"],[{"index":{"value":2405},"size":{"value":40}},"2478e87d-eedd-4dd5-ab30-ea25ab43e8ef"],[{"index":{"value":2459},"size":{"value":56}},"4309a2ff-5730-4f56-8dcd-2b14b29b1452"],[{"index":{"value":2529},"size":{"value":38}},"78bd37bc-e00f-411c-a45a-779752b72237"],[{"index":{"value":2581},"size":{"value":19}},"244cea84-2ef0-477b-9c47-bd6d954d7f73"]]
{"ide":{"node":{"92b99b09-1c45-4ae8-8e54-32cef6df217d":{"position":{"vector":[640,422]}},"db5e8a98-076c-43fd-b0d8-4e4a50d12adc":{"position":{"vector":[640,350]}},"f5450f4d-fb07-47f5-8818-b0bc63eb73cc":{"position":{"vector":[640,128]}},"af4748be-d484-4fb4-8170-571486dd3470":{"position":{"vector":[598,-639]},"visualization":{"show":false,"width":294.45703125,"height":406.53515625}},"f6f516bb-65ca-4d3d-8e4d-7cfbb066b517":{"position":{"vector":[689,-691]}},"d9bf1eed-28f5-434b-a009-f014fb9cdcc7":{"position":{"vector":[697,-763]}},"fbe0593b-40db-4106-a678-14700b6c8609":{"position":{"vector":[689,-852]},"visualization":{"show":true,"width":241.9296875,"height":505.60546875}},"6d027c52-1f07-4dcb-9488-18cc78a72c4e":{"position":{"vector":[989,-307]},"visualization":{"show":true,"width":241.9296875,"height":505.60546875}},"475b9f40-8a0f-4d80-8bc2-b67786a9f8fc":{"position":{"vector":[689,-1430]}},"49f948dd-c5a1-4fa1-bbd9-46e2013d73e7":{"position":{"vector":[-851,914]}},"fb8c5888-1fca-46bd-8af2-e30b8442df79":{"position":{"vector":[-308,820]}},"f0805768-e205-4b8f-b692-d89e8f26fd6b":{"position":{"vector":[-794,748]}},"332d627f-1694-4227-b055-1c33b3a3831d":{"position":{"vector":[-237,662]}},"6add24ea-b777-4dcc-8575-96bd607c0a21":{"position":{"vector":[-794,623]}},"18a8de80-4470-4e87-88c9-db7ea967bb9d":{"position":{"vector":[-516,623]}},"472a6683-c120-41c5-a05f-6cc731518b3f":{"position":{"vector":[-471,626]}},"748906c1-1a61-4b71-9680-23eba378ddf5":{"position":{"vector":[-466,422]}},"d63db436-245a-418f-957f-99020e9930a2":{"position":{"vector":[-466,370]}},"9c99a707-b8c1-420d-adc5-62467d34cd77":{"position":{"vector":[-794,183]}},"188a8803-6ed0-4c2c-9b25-5e152247736d":{"position":{"vector":[-269,494]}},"457714ff-4f05-4e50-966b-fa1e5cff501c":{"position":{"vector":[162,623]}},"4f09384f-7608-4742-96dc-beb3994afa1f":{"position":{"vector":[95,422]}},"f7c9d864-6c73-40b8-bd84-0495d827d830":{"position":{"vector":[630,172]}},"952bc637-9e79-4cb0-bd68-2956726be4cb":{"position":{"vector":[95,350]},"visualization":{"show":false,"width":588.953125,"height":261.62109375}},"2a0af6a8-923b-4ae0-933c-0338860243c7":{"position":{"vector":[917,172]}},"92c6d59a-a235-4a2e-b82b-9a2e7746c3b3":{"position":{"vector":[-173,-193]},"visualization":{"show":true}},"58c47f9e-8603-414d-b63a-44d72fb8c830":{"position":{"vector":[-173,-193]}},"e372dadd-7638-4c2f-9e8c-643bca3a9d37":{"position":{"vector":[95,244]}},"fe1e4668-3217-4b89-8a27-28569cdcee5f":{"position":{"vector":[95,153]}},"abaa894d-693e-4237-98ea-333f39cff76e":{"position":{"vector":[1117,244]}},"05a820e3-7ee9-407a-8063-f1a95f86d33b":{"position":{"vector":[-590,-119]},"visualization":{"show":false,"width":339.109375,"height":379.66015625}},"6877cdaf-064c-4da1-9452-c2fb4e130dd0":{"position":{"vector":[-590,-191]}},"3b49191f-1c52-4b37-84e5-01c57c938984":{"position":{"vector":[-537,-362]}},"b9a5ed27-494e-434f-b942-a5385a50180e":{"position":{"vector":[-567,-263]}},"c58db107-4218-432e-b7a9-feaf34acf2ad":{"position":{"vector":[-502,-623]}},"0005313a-3432-4cea-8241-012aa65a94d1":{"position":{"vector":[-502,-623]}},"f2e7d859-f926-4dca-acbe-f9294653a28e":{"position":{"vector":[-272,-335]}},"eee045fa-e036-452a-aabc-4f6b42962354":{"position":{"vector":[-272,-402]}},"2e49830f-f271-444e-a900-1a6fbb9d8d6e":{"position":{"vector":[-272,-474]},"visualization":{"show":false,"width":200.12109375}},"7c9cb84c-6cdf-4cda-afd8-cb7e1a3660d1":{"position":{"vector":[-254,-546]}},"e725559f-5386-4ac5-8192-5c431db41a81":{"position":{"vector":[-12,-474]}},"af6ce864-6560-40b0-8cdd-11e8014e4add":{"position":{"vector":[-12,-567]}},"084240be-d179-42fc-b26f-55497504d995":{"position":{"vector":[-1050,278]},"visualization":{"show":true}},"23edecd0-a09e-404f-acf7-e0fdbbfbd232":{"position":{"vector":[-590,-639]},"visualization":{"show":false,"width":727.640625,"height":277.58984375}},"a1db685f-7b40-4fc7-ac19-83bcae0f1239":{"position":{"vector":[-459,-883]},"visualization":{"show":true}},"0224d3fe-f366-4e43-a118-63aaa7cf4b20":{"position":{"vector":[-12,56]},"visualization":{"show":false,"width":588.953125,"height":261.62109375}},"cc2131f9-ed7e-40e9-84e7-b3daef160faf":{"position":{"vector":[150,-45]},"visualization":{"show":false,"width":233.1484375,"height":485.6796875}},"cc74ae62-48ff-43f5-a586-bd50db55c7b6":{"position":{"vector":[541,-508]}},"1e6ce55e-2a03-4f98-b35f-926e11c03828":{"position":{"vector":[1946,-289]}},"db4af5ee-3580-4a12-8842-ba14df3b8566":{"position":{"vector":[1639,-378]}},"222065a4-d7f8-464c-b321-aa34cd13f70f":{"position":{"vector":[1625,-101]}},"403be22f-5b4e-4a27-8964-196a354f01ec":{"position":{"vector":[1656,-567]}},"0e08cad7-f3a7-4367-a2d1-bb266370e32d":{"position":{"vector":[1625,-998]}},"873dd01b-6471-4332-a906-3dbcae5d5185":{"position":{"vector":[2103,-580]},"visualization":{"show":true}},"2478e87d-eedd-4dd5-ab30-ea25ab43e8ef":{"position":{"vector":[711,-807]},"visualization":{"show":true,"width":250.53515625,"height":485.41796875}},"4309a2ff-5730-4f56-8dcd-2b14b29b1452":{"position":{"vector":[288,-654]},"visualization":{"show":true}},"78bd37bc-e00f-411c-a45a-779752b72237":{"position":{"vector":[262,-926]}},"244cea84-2ef0-477b-9c47-bd6d954d7f73":{"position":{"vector":[262,-1017]},"visualization":{"show":true}}},"widget":{},"import":{},"snapshot":"eJytVcuO2zYU3esrLhwEsmCbY8myEy9kZDpTtFk0XUzaLhxDYCRaQ4QmBZGeaIp+fEGRlGh7HllkFgP6nnOfuo99Iw5wpzAvcVOiX7AkQA+1aBRgxoL9CfoZf2UvwLdY4a8vGrj+5+558DchKkby65o+z7nj4vue4W8nPuyzJ/3a4kPNiLwA/qbyiBn9FysqeBC8eQMfb/78BFUjjnUgj0VBpKQPRAIXJVlDFgBA947nkMG4xhWRsw3M0bHOlbACxAiv1P0sjgDBAdcwprMNbA2GFdApDO9JvIsiY94zHgRHriiDPbTWaZtz8h0yLel+0w7KrFzdEw4tECZJh+q/D58xZfkNZgx6Y5p8nmYhGMO1JGXne2UiWPq5riCD82LEywF/B5klIspL0uZir0tBm9nG2ESF4ApTLkFLAQEXKur1k1jXkkk124CulH4i1X3SCCaw1T9Nqabg3juYGF7ZiBroJIk8ewlkuj4mNkRlzoW6p7wyZbL56VrB2Pq3MqPhWwqCA6bcLwZkoNsaNQSXEF79JUkjr6qDurol8psS9ZU8YMZyyuujQqpV4aCavKr7hFbiipsgWTOqIPzCv3CDU65IRZrYUhLbeb3uogewgnkvTn1x3IuXVrwYHIWug9vZBlon/8+JPxr/qMaNJEPZdL/8juW9JArpac0fSKFEY5x0LCNwca+QEpbT23A9lXrB9OB7C74zbTI2b5M8zCAeQllb5nt0mcZUp/FSHt2Q/4EpRxerYOC4Gq/RnjJFmmErjH2tThghPY0vjIbXxbFLMl4MsY/taulf8BaSSO+BOILWVkCvHe2nnW3awdz6CXOtboCx00MlfYCTQZo7nTXaC1bCHMb5JDcERVqlP+DogTR0/6hn6zFsSOdZ7EGUJRizo46O+aP73Ev9uZW+HA7RPa4JSOrtvB0j9AkfCITzMNo5zsJwEoSrqiEVVgS24TzcwRahG3HkCkbFaDfkGzubWMFoPvLarp+o+KzvzFM7skRUUqkoL5Q/bUmPL/x5w/wx9RCdia9lw099FQulfV1OzS2NyuK8KkUICN0SWRBeUl5FU/AKBghd94hXjvSntun5Co/d7ojT01XT7eJuhJ4+MwNRB7iNp5BMYbHz7kieZanXktpRc2Rd5OZknMTPpIouj1Cn8MoRcvOxGkQrtyeXljJAej2Zq2qZ5+m46b2EunNqdO3ROy+NTuL5I5ua+TWqr9vR/05Prb2LP7wF+isSn26B/wG7RBxb"}}